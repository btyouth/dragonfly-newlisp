<!DOCTYPE HTML PUBLIC "HTML 4.01 Transitional">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>utils.lsp</title>

<link rel="stylesheet" type="text/css" href="newlispdoc.css" />
</head>

<body style="margin: 20px;" text="#111111" bgcolor="#FFFFFF" 
			link="#376590" vlink="#551A8B" alink="#ffAA28">
<blockquote>
<center><h1>utils.lsp</h1></center>
<p><a href="index.html">Module index</a></p><br/><br/><br/><h2>Module:&nbsp;utils.lsp</h2><b>Author: </b>Greg Slepak <greg at taoeffect.com><br/>
 <p>This file not only provides the functions documented below, but
 it also plays a role in globally overriding certain functions in the MAIN context.</p>
 <p>The overridden functions include: <tt>load</tt>, <tt>print</tt>, and <tt>println</tt>.</p>
 <p><tt>load</tt> is overwritten to load a file only once, while <tt>print</tt> and <tt>println</tt>
 are overwritten to send their output the the <tt>Dragonfly:STDOUT</tt> buffer, allowing
 Dragonfly to ensure pages are displayed properly.</p>

<br/><br/><center>- &sect; -</center><br/>
<a name="_add-to-load-path"></a><h3><font color=#CC0000>add-to-load-path</font></h3>
<b>syntax: (<font color=#CC0000>add-to-load-path</font> <em>str-path-1</em> <em>str-path-2</em> ...)</b><br/>
 <p>Dragonfly overrides the built-in function <tt>load</tt> so that files
 are loaded only once. In addition it supports the concept of "load paths"
 which can be added using this function. This means that you no longer need
 to modify third-party code that contains <tt>load</tt> calls to files located in
 different locations. Simply add a new load path instead.</p>
 <b>example:</b>
 <pre> ; the old way
 (load "MyClass.lsp") ;=> ERROR! MyClass.lsp doesn't exist here!
 ; we must rewrite the file to point to the new location of MyClass.lsp:
 (load "../../myfolder/MyClass.lsp")
 ; -------------------------------
 ; New way, using add-to-load-path
 ; -------------------------------
 (add-to-load-path "../../myfolder")
 ; no need to update any source files, it just works.</pre>
 <b>warning:</b> Use this function sparingly as name-conflicts could
 result in the wrong file being loaded!
<br/><br/><center>- &sect; -</center><br/>
<a name="_regex-captcha"></a><h3><font color=#CC0000>regex-captcha</font></h3>
<b>syntax: (<font color=#CC0000>regex-captcha</font> <em>str-regex</em> <em>str</em> [<em>int-options</em>] [<em>int-captcha</em>])</b><br/>
<b>parameter: </b><em>int-options</em> - options to regex, defaults to 0.<br/>
<b>parameter: </b><em>int-captch</em> - which of the regex group captures to return, defaults to 1.<br/>
 <p>Returns the captured text, or nil if it couldn't be captured.<br/>This is a global function.</p>
 <b>example:</b>
 <pre> (regex-captcha {^(foo|bar).*} "foobaz") => "foo"
 (regex-captcha {^(foo|bar).*} "bazfoo") => nil</pre>
<br/><br/>
<br/><br/><center>- &sect; -</center><br/>
<a name="_load-files-in-dir"></a><h3><font color=#CC0000>load-files-in-dir</font></h3>
<b>syntax: (<font color=#CC0000>load-files-in-dir</font> <em>str-dir</em> <em>regex-match</em>)</b><br/>
 <p>Loads all the files in <em>str-dir</em> matching <em>regex-match</em>. Does not
 traverse subdirectories.<br/>This is a global function.</p>
<br/><br/>
<br/><br/><center>- &sect; -</center><br/>
<a name="_wrap-func"></a><h3><font color=#CC0000>wrap-func</font></h3>
<b>syntax: (<font color=#CC0000>wrap-func</font> <em>func</em> <em>lambda</em>)</b><br/>
 <p>Replaces <em>func</em> with <em>lambda</em>. Inside of <em>lambda</em> use <tt>wrapped-func</tt> to refer
 to the original function. This can be very handy for "aspect oriented programming".</p>
 <b>example:</b>
 <pre> (wrap-func db:execute-update
     (fn () (unless (apply wrapped-func $args)
         (throw-error (string "execute-update failed: " $args)))))</pre>

<br/><br/><center>- &sect; -</center><br/>
<a name="_into-ctx-assoc"></a><h3><font color=#CC0000>into-ctx-assoc</font></h3>
<b>syntax: (<font color=#CC0000>into-ctx-assoc</font> <em>ctx</em> <em>list-assoc</em>)</b><br/>
 <p>Places the key/value pairs in <em>list-assoc</em> into the context <em>ctx</em>
 to be used as a lookup table.<br/>This is a global function.</p>
 <b>example:</b>
 <pre> (new Tree 'MyCtx)
 (into-ctx-assoc MyCtx '(
     ("key" "value")
     ("apple" "mmmm... good")
     ("organic?" true)
 ))</pre>
<br/><br/>
<br/><br/><center>- &sect; -</center><br/>
<a name="_NEWLISP64"></a><h3><font color=#CC0000>NEWLISP64</font></h3>
<b>syntax: NEWLISP64</b><br/>
 <p>A constant that is <tt>true</tt> if we're running the 64-bit version of newLISP.</p>
<br/><br/><center>- &sect; -</center><br/>
<a name="_get-ptr"></a><h3><font color=#CC0000>get-ptr</font></h3>
<b>syntax: (<font color=#CC0000>get-ptr</font> <em>symbol</em>)</b><br/>
 <p>Alias for <tt>get-long</tt> on 64-bit systems, and <tt>get-int</tt> on 32-bit systems.</p>
<br/><br/><center>- &sect; -</center><br/>
<a name="_throw-not-implemented"></a><h3><font color=#CC0000>throw-not-implemented</font></h3>
<b>syntax: (<font color=#CC0000>throw-not-implemented</font>)</b><br/>
 <p>Used to indicate that an ObjNL method *must* be overwritten.</p>


<br/><br/><center>- &part; -</center><br/>
<center><font face='Arial' size='-2' color='#444444'>
generated with <a href="http://newlisp.org">newLISP</a>&nbsp;
and <a href="http://newlisp.org/newLISPdoc.html">newLISPdoc</a>
</font></center>
</blockquote>
</body>
</html>
